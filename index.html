<!DOCTYPE html>
<html>
<head>
    <title>BTCUSDT Order Book & OI/Volume Ratio</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"></script>
    <script src="https://s3.tradingview.com/tv.js"></script>
    <style>
        body {
            background-color: #121212;
            color: #fff;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        #chart-container {
            flex: 4; /* 4 parts height */
        }

        #order-book-container {
            flex: 1; /* 1 part height */
        }

        #tv_chart_container {
            width: 100%; /* Ensure TradingView chart fills container width */
            height: 100%; /* Ensure TradingView chart fills container height */
        }

        #oi-volume-ratio {
            width: 35%;
            margin: 0 auto; /* Center */
        }
    </style>
</head>
<body>
    <div id="chart-container">
        <div id="tv_chart_container"></div>
    </div>

    <div id="order-book-container">
        <h1>BTCUSDT Order Book (0% to 10% around Mid-Price)</h1>
        <div id="order-book-chart"></div>
    </div>

    <h1>BTCUSDT OI/Volume Ratio</h1>
    <div id="oi-volume-ratio">
        <p>OI/Volume Ratio: <span id="oiVolumeRatio"></span></p>
    </div>

    <script>
        // --- TradingView Chart ---

        new TradingView.widget({
            container_id: "tv_chart_container",
            autosize: true, // Let TradingView handle resizing within its container
            symbol: "BINANCE:BTCUSDT",
            interval: "60",
            timezone: "Etc/UTC",
            theme: "dark",
            locale: "en",
            toolbar_bg: "#1e2128",
            enable_publishing: false,
            allow_symbol_change: true,
            studies: [
                "MAExp@tv-basicstudies",
                "RSI@tv-basicstudies",
                "MACD@tv-basicstudies"
            ],
            overrides: {
                "movingAverage.length": 200
            },
            details: true,
            hotlist: true,
            calendar: true,
            withdateranges: true,
            hide_side_toolbar: false,
        });

        // --- Order Book Section ---

        // ... (Rest of the order book and OI/Volume Ratio code remains the same)
        // ...

    </script>

</body>
</html>
