<!DOCTYPE html>
<html>
<head>
  <title>Binance Spot BTC/USDT Order Book</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>Binance Spot BTC/USDT Order Book</h1>
  <div id="order-book-data">
    <h2>Order Book Data</h2>
    <p>Best Bid: <span id="best-bid"></span></p>
    <p>Best Ask: <span id="best-ask"></span></p>
  </div>

  <div id="charts">
    <h2>Order Book Depth Chart</h2>
    <canvas id="depth-chart"></canvas>
  </div>

  <script>
    async function fetchOrderBook() {
      try {
        const response = await fetch('https://api.binance.com/api/v3/depth?symbol=BTCUSDT&limit=100');
        const data = await response.json();

        const bids = data.bids.map(item => parseFloat(item[0]));
        const bidVolumes = data.bids.map(item => parseFloat(item[1]));
        const asks = data.asks.map(item => parseFloat(item[0]));
        const askVolumes = data.asks.map(item => parseFloat(item[1]));

        // ... (Your calculations for order book depth at 1% to 10% here)

        // Update UI with best bid and ask
        document.getElementById('best-bid').textContent = bids[0];
        document.getElementById('best-ask').textContent = asks[0];

        // Create Chart.js chart (example: simple bar chart)
        const ctx = document.getElementById('depth-chart').getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['Bid', 'Ask'],
            datasets: [{
              label: 'Top 10 Volume',
              data: [bidVolumes.slice(0, 10).reduce((a, b) => a + b, 0), 
                     askVolumes.slice(0, 10).reduce((a, b) => a + b, 0)],
              backgroundColor: ['green', 'red']
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });

      } catch (error) {
        console.error("Error fetching order book:", error);
        // Handle error gracefully (e.g., display error message to user)
      }
    }

    fetchOrderBook(); 
  </script>
</body>
</html>
